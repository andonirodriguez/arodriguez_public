<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Andoni Rodriguez Personal Site</title>
    <meta charset="utf-8">
    <meta name="description" content="Andoni Rodriguez Personal Site" />
    <meta name="robots" content="index,follow">
    <!-- Open Graph Protocol Meta -->
    <meta property='og:title' content='Andoni Rodriguez - Personal Site' />
    <meta property='og:url' content='http://www.andonirodriguez.com' />
    <meta property='og:image' content='http://www.andonirodriguez.com/static/img/home-bg.jpg' />
    <meta property='og:type' content='website' />
    <meta property='og:description' content='Andoni Rodriguez - Personal Site' />
    <!-- END Open Graph Protocol Meta -->
    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Andoni Rodriguez - Personal Site" />
    <meta name="twitter:description" content="Andoni Rodriguez - Personal Site" />
    <meta name="twitter:url" content="http://www.andonirodriguez.com" />
    <meta name="twitter:image" content="http://www.andonirodriguez.com/static/img/home-bg.jpg" />
    <!-- END Twitter Cards -->


    <!-- Bootstrap Core CSS -->
    <link href="/static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/css/clean-blog.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Google Analytics -->
    <script src="/static/js/analyticstracking.js"></script>


</head>

<script id="mcjs">!function(c,h,i,m,p){m=c.createElement(h),p=c.getElementsByTagName(h)[0],m.async=1,m.src=i,p.parentNode.insertBefore(m,p)}(document,"script","https://chimpstatic.com/mcjs-connected/js/users/c797fd4414a2173ba89d1552d/dde80ea88a3aa58c45922e85d.js");</script>


    <!-- Page Header -->
    <header class="intro-header" style="background-image: url('/static/img/home-bg.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="site-heading">
                        <h2>Andoni Rodríguez</h2>
                        <hr class="small">
                        <span class="subheading">Articulos</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/">Andoni Rodríguez</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="/posts/">Articulos</a>
                    </li>
                    <li>
                        <a href="/projects/">Proyectos</a>
                    </li>
                    <li>
                        <a href="/contact/">Contacto</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>



    <!-- Post Content -->
    <article>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <h1>Criptomandangas.com</h1>
                    <hr>
                    <h2 class="subheading">Prueba de concepto. Como montar una red privada de Ethereum</h2>
                    <blockquote>
<p><a href="http://criptomandangas.com">Criptomandangas.com</a> es un proyecto que estamos realizando entre unos cuantos compañeros
con el unico fin de dar a conocer BlockChain mientras nosotros mismos vamos aprendiendo sobre esta tecnología, el post
que a continuación vas a leer fue publicado originalmente <a href="http://criptomandangas.com/prueba-de-concepto-como-montar-una-red-privada-de-ethereum/">aqui</a>.
Si te interesa BlockChain y estas pensando en desarrollar sobre ello te recomiendo encarecidamente que te des una vuelta
por este blog porque tiene contenido (en castellano) interesante sobre el tema.</p>
</blockquote>
<p>Desde hace unos años <strong>BlockChain</strong> nos está inundando. Las empresas de todo el mundo intentan con mayor o menor acierto 
implementar esta tecnología en su producto o modelo de negocio.</p>
<p>Aunque la gente normalmente asocia la tecnología <strong>BlockChain</strong> directamente con las criptodivisas mas famosas, para mí lo
interesante de <strong>BlockChain</strong> se centra en el ecosistema de Smarts Contracts y Dapps que se ha formado alrededor de la
red <a href="https://www.ethereum.org/">Ethereum</a></p>
<p>Para que todos tengamos una idea aproximada de lo que es un <strong>BlockChain</strong>, simplemente voy a hacer copy &amp; paste de la 
definición de <a href="https://en.wikipedia.org/wiki/Blockchain">WikiPedia</a>:</p>
<blockquote>
<p>A blockchain, is a continuously growing list of records, called blocks, which are linked and secured using cryptography.
Each block typically contains a cryptographic hash of the previous block, a timestamp and transaction data.
By design, a blockchain is inherently resistant to modification of the data. 
It is "an open, distributed ledger that can record transactions between two parties efficiently and in a verifiable and permanent way".
For use as a distributed ledger, a blockchain is typically managed by a peer-to-peer network collectively adhering to a protocol for validating new blocks. 
Once recorded, the data in any given block cannot be altered retroactively without the alteration of all subsequent blocks, which requires collusion of the network majority.</p>
<p>Blockchains are secure by design and are an example of a distributed computing system with high Byzantine fault tolerance. 
Decentralized consensus has therefore been achieved with a blockchain.
This makes blockchains potentially suitable for the recording of events, medical records, and other records management activities, such as identity management, transaction processing, documenting provenance, food traceability or voting.</p>
</blockquote>
<p>La dosis de humo que existe alrededor de la tecnología <strong>BlockChain</strong> es mas que notable; ICO's que no tienen un modelo de 
negocio claro o viable, precios desorbitados de las criptomonedas mas famosas, robos, excepticismo alrededor de la 
comunidad, desconocimiento en general y un largo numero de etceteras.</p>
<p>Pero la realidad es que <strong>BlockChain</strong> ha venido para quedarse. La forma de hacer transacciones entre los usuarios, a través
de los Smart Contracts, la descentralización de todos los nodos, las Daaps, las ICO's (con una buena idea de negocio), 
van a posibilitar que en los próximos años veamos un montón de empresas crearse alrededor de <strong>BlockChain</strong> y de <strong>Ethereum</strong>.
Personalmente creo que esto es algo muy positivo para nuestro sector y que nos va a abrir las puertas a todo un conjunto
de posibilidades aún por conocer.</p>
<p>Considero que la mejor manera de acercarme al mundo del <strong>BlockChain</strong> es montando una red privada de <strong>Ethereum</strong>, porque creo
firmemente que es la metodología sobre la que más se está creciendo en este sector.</p>
<p>En este artículo voy a explicaros como montar vuestra propia red privada de <strong>Ethereum</strong>, al margen de la <strong>MainNet</strong>,
la finalidad es puramente conocer como se monta una red de <a href="https://www.ethereum.org/">Ethereum</a> desde 0 y que seamos capaces de entender como
funciona un nodo <a href="https://github.com/ethereum/go-ethereum/wiki/geth">Geth</a>, como unirlos entre sí y como minar nuestros propios Tokens.</p>
<h3>Requisitos</h3>
<p>Antes de meternos en faena, tenemos que instalar unas cuantas cosas. Básicamente la idea detrás de una red privada de Ethereum
es que sean varios nodos (varias máquinas), con varios mineros. Pero como este caso solo tiene fines de aprendizaje, vamos a
usar la misma maquina para todo.</p>
<p>Para montar nuestra red privada de Ethereum necesitamos lo siguiente:</p>
<ul>
<li>Un servidor con Ubuntu 16.04: </li>
</ul>
<p>Este servidor puede ser lo que v osotros querais, tanto una maquina virtual, un servidor fisico, uno en cloud, lo que sea.
Lo importante es que tenga instalado Ubuntu y sea una instalacion mas o menos limpia. </p>
<ul>
<li>Cliente Geth instalado</li>
</ul>
<p>El ciente de Ethereum que vamos a usar <strong>Geth</strong>. 
<a href="https://github.com/ethereum/go-ethereum/wiki/geth">Geth es la implementacion en Go</a> del protocolo <strong>Ethereum</strong>. Para
instalarlo haremos lo siguiente:</p>
<p>Agregamos el repositorio y updateamos apt:</p>
<p><code>$ sudo add-apt-repository -y ppa:ethereum/ethereum</code></p>
<p><code>$ sudo apt-get update</code></p>
<p>E instalamos el cliente de <strong>Geth</strong>:</p>
<p><code>$ sudo apt-get install ethereum</code></p>
<ul>
<li>Editor de ficheros </li>
</ul>
<p>Realmente puede ser el editor de ficheros con el que os encontreis mas comodos, en mi caso en el lado del servidor, siempre
uso <a href="http://www.vim.org/">vim</a></p>
<h3>Creación del Genesis block</h3>
<p>La única cosa (o casi) que diferencia a una red privada de Ethereum de un nodo normal perteneciente a la <strong>Main Network</strong> 
es la existencia del Block Genesis en el directorio de Ethereum. </p>
<p>Para generar nuestro Genesis Blockharemos lo siguiente:</p>
<ul>
<li>Creamos un directorio para almacenar los ficheros que necesita la red de Ethereum.</li>
</ul>
<p><code>$ mkdir -p ethereum-private-network</code></p>
<ul>
<li>Dentro del directorio 'ethereum-private-network', creamos el fichero JSON que realmente es el Genesis Block
(genesisblock.json).</li>
</ul>
<p>'<strong>ethereum-private-network/genesisblock.json</strong>' quedaría de esta forma:</p>
<pre>
{
   "config": {
      "chainId": 1984,
      "homesteadBlock": 0,
      "eip155Block": 0,
      "eip158Block": 0,
      "byzantiumBlock": 0
   },
   "difficulty": "200",
   "gasLimit": "2000000"
}   
</pre>

<p>En este fichero a nivel técnico, hay bastantes conceptos nuevos y que necesitan ser explicados, vamos a ir viendo los
más importantes.</p>
<p>'<strong> chainId </strong>'</p>
<p>Este es el identificador único de nuestro BlockChain, esto es con lo que vamos a identificar nuestra red privada.</p>
<p>'<strong> difficulty </strong>'</p>
<p>Este parámetro no es ni más ni menos que la dificultad que se van a encontrar los nodos mineros a la hora de resolver
los algoritmos para generar nuevos bloques y ser recompensados. </p>
<p>Es más que conveniente poner un número bajo, para que podamos ver a nuestros mineros genear tokens, 200 es mas que
suficiente.</p>
<p>'<strong> gasLimit </strong>'</p>
<p>El gas es un concepto un tanto difícil de entender dentro de la red Ethereum. Se entiende gas como el valor que va a costar
ejecutar las diferentes operaciones en nuestra red privada. El gasLimit hace referencia a la cantidad máxima que puede ser
consumida antes de que la transaccción falle por completo.</p>
<p>En nuestro caso el gasLimit lo hemos seteado a 2000000.</p>
<h3>Iniciando el primer nodo</h3>
<p>Una vez definido y configurado nuestro Genesis Block lo único que hace falta para iniciar la red privada es iniciar el 
directorio del nodo de la siguiente forma:</p>
<p><code>$ geth --datadir ./data_dir init ./genesisblock.json</code></p>
<p>Y finalmente, arrancarlo:</p>
<p><code>$ geth --datadir ./data_dir --networkid 9988 console 2&gt;&gt; main_node.log</code></p>
<p>La opción '--networkid' es importante porque es el identificador que van a tener que poner los otros nodos cuando se 
quieran unir a nuestra red.</p>
<h3>Creando cuentas</h3>
<p>Algo básico en una red privada de Ethereum son las direcciones de las cuentas donde vamos a guardar nuestros, tokens.
Para crearnos una cuenta debemos ejecujtar lo siguiente en la consola de Geth:</p>
<p><code>&gt; personal.newAccount("tu_clave_super_secreta")</code></p>
<p>Después vamos a setear esta cuenta como default en nuestra red privada:</p>
<p><code>&gt; miner.setEtherbase(web3.eth.accounts[0])</code></p>
<h3>Agregando Nodos</h3>
<p>Para que una red privada de Ethereum sea merecedora de ser llamada red, obviamente, tiene que tener más de un nodo. En
este caso vamos a arrancar un par de nodos mas dentro del mismo servdidor, que es algo que no en una red de verdad no
tendría demasiado sentido, pero como el objetivo en este artículo es aprender a construirla no hay problema.</p>
<p>Arrancamos el segundo nodo con el siguiente comando:</p>
<p><code>$ geth --datadir ./data_dir_1 init ./genesisblock.json &amp;&amp; geth --datadir ./peer2DataDir --networkid 9988 --port 30305 console 2&gt;&gt; eth_node_1.log</code></p>
<p>Arrancamos el tercer nodo con el siguiente comando: </p>
<p><code>$ geth --datadir ./data_dir_2 init ./genesisblock.json &amp;&amp; geth --datadir ./peer2DataDir --networkid 9988 --port 30306 console 2&gt;&gt; eth_node_2.log</code></p>
<p>Una vez hecho esto, debemos ir as la consola del primer nodo para sacar la información necesaria:</p>
<p><code>&gt; admin.nodeInfo.enode</code></p>
<p>La salida deberia ser algo parecido a esto:</p>
<p>'enode://dcd6834abnds11ggaffdas6d9dcb14eeb1d1b7575b0653fa1025ad1b7722c6tregerdt652d0449f0966e97931bdf037edadas55
42086e7b9ee15@[::]:30303'</p>
<p>Para agregar este primer nodo al segundo y al tercer nodo respectivamente, nos tenemos que conectar a las respectivas
consolas de Geth de los nodos y realizar la siguiente operación:</p>
<p><code>&gt; admin.addPeer("enode://dcd6834abnds11ggaffdas6d9dcb14eeb1d1b7575b0653fa1025ad1b7722c6tregerdt652d0449f0
      966e97931bdf037edadas5542086e7b9ee15@[::]:30303")</code></p>
<h3>Mineros</h3>
<p>Para realizar la operación de minado basta con conectase a cualquier consola de los nodos y escribir el siguiente comando:</p>
<p><code>&gt; miner.start()</code></p>
<p>Y para parar de minar:</p>
<p><code>&gt; miner.stop()</code></p>
<p>Podemos comprobar en cualquier momento el balance de nuestra cuenta:</p>
<p><code>&gt; eth.getBalance(eth.accounts[0])</code></p>
<h3>Conclusiones</h3>
<p>Para finalizar el artículo me gustaría hacer hincapié en la relativa facilidad que supone montar una red privada de 
<strong>Ethereum</strong>. El potencial que este tipo de redes puede tener en un futuro a corto y medio plazo es asombroso. </p>
<p>Os animo a que intenteis montar vuestras propias redes privadas de <strong>Ethereum</strong> para que podais comprender de primera mano 
como funciona una red de estilo, ya que no es difícil y si que es muy interesante.</p>
<p>Un saludo.</p>
                    <p class="post-meta">
                        Por <strong><a href="/contact/">Andoni</a></strong> el <strong>21 de Febrero de 2018</strong>
                    </p>
                </div>
            </div>
        </div>
    </article>

    <hr>




    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                        <li>
                            <a href="https://twitter.com/AndoniRodriguez">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://www.linkedin.com/in/andonirodriguez">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/andonirodriguez">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="mailto:andoni.rodriguez@gmail.com">
                                <span class="fa-stack fa-lg">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </li>
                    </ul>
                    <p class="copyright text-muted">Copyright &copy; Andoni Rodríguez 2022</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="/static/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="/static/js/bootstrap.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="/static/js/clean-blog.min.js"></script>

</body>
</html>
